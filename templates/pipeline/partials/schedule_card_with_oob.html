{% load humanize %}
{# Main card inserted into target status #}
{% include "pipeline/partials/schedule_card.html" %}

{# OOB: Delete old card from source status #}
{% if source_status %}
<div id="schedule-{{ schedule.id }}" hx-swap-oob="delete"></div>
{% endif %}

{# OOB: Update source status count #}
{% if source_status %}
<span id="count-{{ source_status }}" hx-swap-oob="true" class="ml-2 px-2 py-0.5 text-xs font-medium
    {% if source_status == 'COMPLETED' %}bg-green-200 text-green-800
    {% elif source_status == 'NEW_REQUEST' %}bg-blue-200 text-blue-800
    {% elif source_status == 'SITE_OFFICER_ASSIGNED' %}bg-purple-200 text-purple-800
    {% elif source_status == 'SCHEDULED' %}bg-indigo-200 text-indigo-800
    {% elif source_status == 'IN_PROGRESS' %}bg-yellow-200 text-yellow-800
    {% else %}bg-gray-200 text-gray-700{% endif %} rounded-full">
    {{ source_count }}
</span>
{% endif %}

{# OOB: Update target status count #}
<span id="count-{{ target_status }}" hx-swap-oob="true" class="ml-2 px-2 py-0.5 text-xs font-medium
    {% if target_status == 'COMPLETED' %}bg-green-200 text-green-800
    {% elif target_status == 'NEW_REQUEST' %}bg-blue-200 text-blue-800
    {% elif target_status == 'SITE_OFFICER_ASSIGNED' %}bg-purple-200 text-purple-800
    {% elif target_status == 'SCHEDULED' %}bg-indigo-200 text-indigo-800
    {% elif target_status == 'IN_PROGRESS' %}bg-yellow-200 text-yellow-800
    {% else %}bg-gray-200 text-gray-700{% endif %} rounded-full">
    {{ target_count }}
</span>

{# OOB: Update total active count #}
<strong id="total-active-count" hx-swap-oob="true" class="text-gray-900">{{ total_active }}</strong>
