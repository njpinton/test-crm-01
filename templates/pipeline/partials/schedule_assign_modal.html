<div id="assign-schedule-form">
    <h3 class="text-lg font-semibold text-gray-900 mb-4">Assign Site Officer</h3>
    <p class="text-sm text-gray-600 mb-4">
        Assign a site officer to move this schedule to "Site Officer Assigned" status.
    </p>

    <form hx-post="{% url 'pipeline:assign_schedule' schedule.pk %}"
          hx-target="body"
          hx-swap="none">
        {% csrf_token %}
        <input type="hidden" name="source_status" value="{{ source_status }}">

        <div class="mb-4">
            <label for="assigned_to" class="block text-sm font-medium text-gray-700 mb-1">
                Site Officer
            </label>
            <select name="assigned_to" id="assigned_to" required
                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                <option value="">Select a site officer...</option>
                {% for user in users %}
                <option value="{{ user.pk }}">{{ user.get_full_name|default:user.email }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-4 text-sm text-gray-600">
            <p><strong>Schedule:</strong> {{ schedule.title }}</p>
            <p><strong>Client:</strong> {{ schedule.deal.client.company_name }}</p>
            <p><strong>Date:</strong> {{ schedule.scheduled_date|date:"M d, Y" }}</p>
        </div>

        <div class="flex justify-end space-x-3">
            <button type="button"
                    @click="open = false"
                    class="px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900">
                Cancel
            </button>
            <button type="submit"
                    class="px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700">
                Assign & Move
            </button>
        </div>
    </form>
</div>
